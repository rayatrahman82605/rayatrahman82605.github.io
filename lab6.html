<!DOCTYPE html>
<html>
<head>
    <title>CSC 225 â€“ Lab 6</title>
    <style>
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
            padding: 8px;
        }
    </style>
</head>
<body>

    <h1>Cat Facts</h1>

    <!-- Button to trigger API call -->
    <button id="loadDataBtn">Load Facts</button>

    <!-- Image that will be updated -->
    <div>
        <h3>Cat Image</h3>
        <img id="catImage" src="placeholder.jpg" width="300">
    </div>

    <!-- Table where the facts will appear -->
    <h3>Facts Table</h3>
    <table id="factsTable">
        <thead>
            <tr>
                <th>Fact ID</th>
                <th>Fact</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        document.getElementById("loadDataBtn").addEventListener("click", () => {

            fetch("https://brianobruno.github.io/cats.json")
                .then(response => response.json())
                .then(data => {

                    // Update the image from the API
                    document.getElementById("catImage").src = data.catPhoto;

                    // Sort the facts by factId
                    const sortedFacts = data.facts.sort((a, b) => a.factId - b.factId);

                    // Select the table body
                    const tableBody = document.querySelector("#factsTable tbody");
                    tableBody.innerHTML = ""; // Clear any existing rows

                    // Insert each fact into the table
                    sortedFacts.forEach(fact => {

                        const row = document.createElement("tr");

                        row.innerHTML = `
                            <td>${fact.factId}</td>
                            <td>${fact.text}</td>
                        `;

                        tableBody.appendChild(row);
                    });
                })
                .catch(error => {
                    console.error("Error fetching API:", error);
                });

        });
    </script>

</body>
</html>
